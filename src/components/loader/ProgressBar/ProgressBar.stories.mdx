import { useState, useEffect } from "react";
import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs/blocks";
import { ProgressBar } from "./ProgressBar";

<Meta title="Components/Loaders/ProgressBar" component={ProgressBar} />

# ProgressBar

A simple progress indicator.

<ArgsTable of={ProgressBar} />

### Basic

<Canvas>
    <Story name="basic">
        {() => {
            const [percent, setPercent] = useState(0);
            useEffect(() => {
                setTimeout(() => {
                    setPercent((p) => (p >= 100 ? 0 : p + 1));
                }, 100);
            }, [percent]);
            return <ProgressBar percent={percent}>Uploading file...</ProgressBar>;
        }}
    </Story>
</Canvas>

### Color

<Canvas>
    <Story name="color">
        {() => {
            const [percentSuccess, setPercentSuccess] = useState(20);
            const [percentError, setPercentError] = useState(50);
            useEffect(() => {
                setTimeout(() => {
                    setPercentSuccess((p) => (p >= 100 ? 0 : p + 1));
                }, 100);
            }, [percentSuccess]);
            useEffect(() => {
                setTimeout(() => {
                    setPercentError((p) => (p >= 100 ? 0 : p + 1));
                }, 100);
            }, [percentError]);
            return (
                <React.Fragment>
                    <ProgressBar percent={percentSuccess} color="success">
                        Uploading file...
                    </ProgressBar>
                    <ProgressBar percent={percentError} color="error">
                        Uploading file...
                    </ProgressBar>
                </React.Fragment>
            );
        }}
    </Story>
</Canvas>
